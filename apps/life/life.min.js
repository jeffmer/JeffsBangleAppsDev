Bangle.setLCDTimeout(30);¬pal1color=¸Uint16Array([0,65535]),buf=Graphics.createArrayBuffer(160,160,1,{msb:!0});ªflip(){g.drawImage({width:160,height:160,bpp:1,buffer:buf.buffer,palette:pal1color},40,40);buf.clear()}¬genA=¸Uint8Array(324),genB=¸Uint8Array(324);ªinitDraw(a){§(¬f=1;17>f;˜f)§(¬d=1;17>d;˜d){¬c=.5>Math.random()?1:0;a[d+18*f]=c;£(1Šc){c=10*(d-1);¬b=10*(f-1);buf.fillRect(c,b,c+7,b+7)}}flip()}
ªnext(a,f){"ram";§(¬d=1;17>d;˜d)§(¬c=1;17>c;˜c){¬b=c+18*d,e=a[b-19]+a[b-18]+a[b-17]+a[b-1]+a[b+1]+a[b+17]+a[b+18]+a[b+19];e=1Ša[b]ž2Še 3Še?1:0;f[b]=e;1Šež(b=10*(c-1),e=10*(d-1),buf.fillRect(b,e,b+7,e+7))}flip()}¬turn=!0,first=next.bind(¶,genA,genB),second=next.bind(¶,genB,genA);ªalternate(){turn?first():second();turn=!turn}¬generation=0;ªreset(){g.setColor(1,1,1);initDraw(genA);turn=!0;generation=0}
ªhowlong(){g.setColor(1,1,1);¬a=Date.now();alternate();˜generation;a=Math.floor(Date.now()-a);g.setFont("6x8",2);g.setFontAlign(-1,-1,0);g.drawString("Gen:"+generation+"  "+a+"ms  ",20,220,!0)}¬intervalRef=¶;ªstopdraw(){intervalRefžclearInterval(intervalRef)}ªstartdraw(){g.clear();Bangle.drawWidgets();g.reset();g.setFont("6x8",2);g.setFontAlign(0,0,3);g.drawString("Reset",230,200);howlong();intervalRef=setInterval(howlong,1E3)}
ªsetButtons(){setWatch(Bangle.showLauncher,BTN2,{repeat:!1,edge:"falling"});setWatch(reset,BTN3,{repeat:!0,edge:"rising"})}¬SCREENACCESS={withApp:!0,request:ª(){¯.withApp=!1;stopdraw();clearWatch()},release:ª(){¯.withApp=!0;startdraw();setButtons()}};Bangle.on("lcdPower",ª(a){SCREENACCESS.withAppž(a?startdraw():stopdraw())});g.clear();Bangle.loadWidgets();startdraw();setButtons();reset();